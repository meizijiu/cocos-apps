{"version":3,"sources":["file:///Users/mzwine/Codes/other/cocos-apps/watermelon/assets/GlobalScript/AudioCtrl.ts"],"names":["_decorator","Component","AudioClip","CCString","ccclass","property","CLIP","AudioCtrl","start","onDestroy","i","clips","length","stop","playOneShot","clipIndex","vol","play","loop","setVolume","setLoop","getPlayState","state","PlayingState","PLAYING"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;;;;;;;AAEnCC,MAAAA,O,GAAsBJ,U,CAAtBI,O;AAASC,MAAAA,Q,GAAaL,U,CAAbK,Q;;iBAELC,I;AAAAA,QAAAA,I,CAAAA,I;AAAAA,QAAAA,I,CAAAA,I;AAAAA,QAAAA,I,CAAAA,I;AAAAA,QAAAA,I,CAAAA,I;AAAAA,QAAAA,I,CAAAA,I;SAAAA,I,oBAAAA,I;;AAMX,O,CAED;;2BAGaC,S,WADZH,OAAO,CAAC,WAAD,C,UAGLC,QAAQ,CAACF,QAAD,C,UAGRE,QAAQ,CAAC,CAACH,SAAD,CAAD,C;;;;;;;;;;;;;;;;;;;;;eAGTM,K,GAAA,iBAAQ,CAEP,C;;eAEDC,S,GAAA,qBAAY;AACV,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,KAAL,CAAWC,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AAC1C,gBAAI,KAAKC,KAAL,CAAWD,CAAX,CAAJ,EAAmB;AACjB,mBAAKC,KAAL,CAAWD,CAAX,EAAcG,IAAd;AACD;AACF;AACF,S;;eAEDC,W,GAAA,qBAAYC,SAAZ,EAA4BC,GAA5B,EAAuC;AAAA,cAAXA,GAAW;AAAXA,YAAAA,GAAW,GAAL,GAAK;AAAA;;AACrC,cAAI,KAAKL,KAAL,CAAWI,SAAX,CAAJ,EAA2B;AACzB,iBAAKJ,KAAL,CAAWI,SAAX,EAAsBD,WAAtB,CAAkCE,GAAlC;AACD;AACF,S;;eAEDC,I,GAAA,cAAKF,SAAL,EAAqBG,IAArB,EAAmCF,GAAnC,EAA8C;AAAA,cAAzBE,IAAyB;AAAzBA,YAAAA,IAAyB,GAAlB,KAAkB;AAAA;;AAAA,cAAXF,GAAW;AAAXA,YAAAA,GAAW,GAAL,GAAK;AAAA;;AAC5C,cAAI,KAAKL,KAAL,CAAWI,SAAX,CAAJ,EAA2B;AACzB,gBAAIG,IAAI,IAAI,IAAZ,EAAkB;AAChB,mBAAKP,KAAL,CAAWI,SAAX,EAAsBI,SAAtB,CAAgCH,GAAhC;AACA,mBAAKL,KAAL,CAAWI,SAAX,EAAsBK,OAAtB,CAA8BF,IAA9B;AACA,mBAAKP,KAAL,CAAWI,SAAX,EAAsBE,IAAtB;AACD,aAJD,MAKK;AACH,mBAAKN,KAAL,CAAWI,SAAX,EAAsBD,WAAtB,CAAkCE,GAAlC;AACD;AACF;AACF,S;;eAEDK,Y,GAAA,sBAAaN,SAAb,EAAgC;AAC9B,cAAI,KAAKJ,KAAL,CAAWI,SAAX,CAAJ,EAA2B;AACzB,mBAAO,KAAKJ,KAAL,CAAWI,SAAX,EAAsBO,KAA7B;AACD;;AACD,iBAAO,IAAP;AACD,S;;eAEDT,I,GAAA,cAAKE,SAAL,EAAwB;AACtB,cAAI,KAAKJ,KAAL,CAAWI,SAAX,KAAyB,KAAKJ,KAAL,CAAWI,SAAX,EAAsBO,KAAtB,IAA+BpB,SAAS,CAACqB,YAAV,CAAuBC,OAAnF,EAA4F;AAC1F,iBAAKb,KAAL,CAAWI,SAAX,EAAsBF,IAAtB;AACD;AACF,S;;;QAlD4BZ,S;;;;;iBAGF,E;;;;;;;iBAGM,E","sourcesContent":["import { _decorator, Component, AudioClip, CCString } from \"cc\";\n\nconst { ccclass, property } = _decorator;\n\nexport enum CLIP {\n  BGM = 0,\n  DROP = 1,\n  MERGRE = 2,\n  BUTTON = 3,\n  GREAT = 4,\n};\n\n//注意 给上边的枚举添加任意新的东西之后都要记得取AudioHelper里添加新的路径和资源文件到魅族的包里\n\n@ccclass(\"AudioCtrl\")\nexport class AudioCtrl extends Component {\n\n  @property(CCString)\n  public sceneName: string = '';\n\n  @property([AudioClip])\n  public clips: Array<AudioClip> = [];\n\n  start() {\n\n  }\n\n  onDestroy() {\n    for (let i = 0; i < this.clips.length; i++) {\n      if (this.clips[i]) {\n        this.clips[i].stop();\n      }\n    }\n  }\n\n  playOneShot(clipIndex: any, vol = 1.0) {\n    if (this.clips[clipIndex]) {\n      this.clips[clipIndex].playOneShot(vol);\n    }\n  }\n\n  play(clipIndex: any, loop = false, vol = 1.0) {\n    if (this.clips[clipIndex]) {\n      if (loop == true) {\n        this.clips[clipIndex].setVolume(vol);\n        this.clips[clipIndex].setLoop(loop);\n        this.clips[clipIndex].play();\n      }\n      else {\n        this.clips[clipIndex].playOneShot(vol)\n      }\n    }\n  }\n\n  getPlayState(clipIndex: number) {\n    if (this.clips[clipIndex]) {\n      return this.clips[clipIndex].state;\n    }\n    return null;\n  }\n\n  stop(clipIndex: number) {\n    if (this.clips[clipIndex] && this.clips[clipIndex].state == AudioClip.PlayingState.PLAYING) {\n      this.clips[clipIndex].stop();\n    }\n  }\n}"]}